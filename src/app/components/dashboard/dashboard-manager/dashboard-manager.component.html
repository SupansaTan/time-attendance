<div class="card rounded-25 border-0 shadow-lg">
  <h3 class="mx-4 mt-3 mb-0 heading">Departments</h3>

  <div class="row row-cols-lg-5 mx-3 mt-2 mb-3 g-3">
    <div *ngFor="let department of departments" class="col position-relative">

      <a href="#" [ngClass]="('p-3 card department rounded-25 border-0' + (department.actual_emp>0 ? '':' grey'))">
        <h3>{{ department.name }}</h3>

        <div class="my-2">
          <i class="fas fa-clock d-inline me-2"></i>
          <p class="d-inline px-2 rounded-25 shadow bg-white">{{ department.start_time + ' - ' + department.end_time }}</p>
        </div>

        <div class="ot-wrapper mb-5 mt-2">
          <p class="fw-bold mb-1">OT Plan</p>
          <p class="hours rounded-25 shadow bg-white px-2">{{ department.ot_plan + " hours" }}</p>
        </div>

        <div class="chart-wrapper position-absolute">
          <svg viewBox="0 0 36 36" class="circular-chart green">
            <path class="circle-bg"
              d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <path *ngIf="department.actual_emp > 0" class="circle"
              [attr.stroke-dasharray]="getPercentage(department.actual_emp, department.total_emp) + ', 100'"
              d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <text x="18" y="19.35" class="percentage">{{ getPercentage(department.actual_emp, department.total_emp) + '%' }}</text>
            <text x="10" y="25.35" class="total-employee">{{ department.actual_emp + '/' + department.total_emp + ' คน' }}</text>
          </svg>
        </div>

      </a>
    </div>
  </div>

</div>
